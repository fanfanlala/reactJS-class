<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="node_modules/react/dist/react.js"></script>
    <script src="node_modules/react-dom/dist/react-dom.js"></script>
    <script src="node_modules/babel-standalone/babel.js"></script>
</head>
<body>
<div id="root"></div>
<div id="clock"></div>
<div id="finalClock"></div>
<div id="input"></div>
<script type="text/babel">
    //æ¸²æŸ“æ–¹å¼1 é€šè¿‡ReactDOM.render
    function tick() {
        const element = (
                <div>
                    <h1>hello,world</h1>
                    <h2>It is {new Date().toLocaleString() }</h2>
                </div>
        )

        ReactDOM.render(
                element,
                document.getElementById('root')
        )
    }

    setInterval(tick, 1000)

    //è¿‡æ¸¡æ•ˆæœ
    class Clock extends React.Component {
        render() {
            return (
                    <div>
                        <h1>hello,world</h1>
                        <h2>It is {this.props.date.toLocaleString() }</h2>
                    </div>
            )
        }
    }

    function tick1() {
        ReactDOM.render(
                <Clock date={new Date()}/>,
                document.getElementById('clock')
        )
    }

    setInterval(tick1,1000)

    //æ¸²æŸ“æ–¹å¼äºŒ state
    //1.state çŠ¶æ€
    //ä¸ props ç›¸åŒ,ä¹Ÿæ˜¯ç»„ä»¶çš„å±æ€§
    //ä¸ºäº†å®ç°ç»„ä»¶å†…éƒ¨æ¸²æŸ“,å¼•å…¥æ–°çš„æ¦‚å¿µ state
    //ä½¿ç”¨this.state.date æ›¿æ¢ this.props.date
    class FinalClock extends React.Component{
        //æ„é€ å™¨å‡½æ•° æˆ–è€…åˆå§‹åŒ–å‡½æ•°
        constructor(props){
            //ç»§æ‰¿çˆ¶ç±»ä¸­è¯¥å‡½æ•°çš„æ‰€æœ‰å†…å®¹
            super(props)
            //ç»™stateèµ‹åˆå§‹å€¼
            this.state = {date:new Date()}

            //æ¯éš”ä¸€ç§’ä¿®æ”¹çŠ¶æ€
            //è·å–å½“å‰æ—¶é—´
            setInterval(function () {
                //bindç»‘å®š
                this.setState({
                    date:new Date()
                })
            }.bind(this),1000)
        }
        render(){
            return(
                    <div>
                        <h1>hello,world</h1>
                        <h2>It is {this.state.date.toLocaleString() }</h2>
                    </div>
            )
        }
    }

    ReactDOM.render(
            <FinalClock/>,
            document.getElementById('finalClock')
    )

    /*
    * å¯¹æ¯” state å’Œ props
    * props å±æ€§
    *       ä¸å¯ä¿®æ”¹
    *       ä¸€èˆ¬ç”¨äºå€¼ä¸å˜çš„æƒ…å†µ,æ ‡é¢˜,æ–°é—»,æè¿°.....
    * state çŠ¶æ€
    *       å¯ä¿®æ”¹
    *       ä¸€èˆ¬ç”¨äºå¯æ“ä½œçš„å†…å®¹(ä¼šæœ‰çŠ¶æ€å˜æ›´),è¾“å…¥æ¡†,å•é€‰,å¤é€‰.......
    * */

    //ä¾‹å­ğŸŒ°
    class Input extends React.Component{
        constructor(){
        super()
            this.state = {
                value:'æˆ‘æ˜¯è˜‘è‡'
            }
    }

    changeValue (event){
        //å½“æ‰§è¡ŒsetStateæ—¶,ç»„ä»¶ä¼šé‡æ–°è°ƒç”¨æ¸²æŸ“å‡½æ•°(render)
        //ä¸è¦ç›´æ¥ä¿®æ”¹çŠ¶æ€,ä¾‹:this.state.value = 'haha'(X) æ­¤æ®µä»£ç ä¸ä¼šé‡æ–°æ¸²æŸ“
        this.setState({
            value:event.target.value
        })
    }
        render(){
            //changeValueç»‘å®šthis => changValue.bind(this)
            //å› ä¸ºchangeValueå†…éƒ¨thiséReactç»„ä»¶,éœ€è¦å°†ç»„ä»¶æœ¬èº«ä¼ å…¥å‡½æ•°å†…éƒ¨
            return (
                    <div>
                        <input value={this.state.value} onChange={this.changeValue.bind(this)}/>
                        <p>{this.state.value}</p>
                    </div>

            )
        }
    }

    ReactDOM.render(
            <Input />,
            document.getElementById('input')
    )

</script>
</body>
</html>